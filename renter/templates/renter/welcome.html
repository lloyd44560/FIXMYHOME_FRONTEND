{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Welcome Home - FixMyHome</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Bootstrap Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Lexend Font -->
  <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <style>
    body {
      font-family: 'Lexend', sans-serif;
    }
    .btn-primary {
      background-color: #293272;
      color: white;
    }
    .btn-primary:hover {
      background-color: #1f2558;
    }
    .btn-accent {
      background-color: #EF7153;
      color: white;
    }
    .btn-accent:hover {
      background-color: #d75f44;
    }
    a {
    text-decoration: none !important;
  }
  a:hover {
    text-decoration: none !important;
  }
  @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
    .spinner-border {
        border-radius: 50%;
        animation: spin 1s linear infinite;
    }
  </style>
</head>

<body class="bg-gray-50 font-sans">
  {% include 'renter/home/navbar.html' %}

  <!-- Hero Section -->
  <section class="relative flex items-center justify-center px-4 py-24 sm:px-6 lg:px-8 bg-cover bg-center bg-no-repeat min-h-[70vh]" style="background-image: url('{% static 'renter/images/RENTER_BG.jpg' %}');">
    <div class="absolute inset-0 bg-black/65 backdrop-blur-sm"></div>
    <div class="relative z-10 max-w-3xl mx-auto text-left pl-8 sm:pl-12 lg:pl-16">
      <h2 class="text-4xl sm:text-5xl lg:text-6xl font-bold mb-6 text-white drop-shadow-xl">Welcome Back, {{ user.first_name }}!</h2>
      <p class="text-white text-lg sm:text-xl lg:text-2xl mb-8 drop-shadow-xl max-w-2xl">
        Manage your properties, report maintenance issues, and connect with agents and traders seamlessly.
      </p>
      <a href="/properties/" class="inline-block btn-primary py-3 px-8 rounded-full shadow-lg transition duration-300 text-lg font-semibold">
        Manage Your Properties
      </a>
    </div>
  </section>

    <!--Added the Maintenance Request Here -->
    <!-- Maintenance Request Tab - Enhanced & Responsive -->
    <!-- Maintenance Request Tab - Blue Title + Border -->
    <div class="container mx-auto mt-6 px-4">
        <div class="tab-pane fade show active" id="maintenance" role="tabpanel" aria-labelledby="maintenance-tab">

            <!-- Header with Blue Title & Bordered Container -->
            <div class="bg-white border-2 border-[#006ffd] rounded-xl shadow-md overflow-hidden">

                <!-- Header -->
                <div class="flex items-center justify-between p-4 bg-gradient-to-r from-[#006ffd]/5 to-transparent border-b border-[#006ffd]/20">
                    <h2 class="text-2xl font-bold flex items-center gap-2" style="color: #006ffd;">
                        <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="color: #006ffd;">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5"
                                  d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        Report Required Maintenance/Issues
                    </h2>
                    <button onclick="location.reload()"
                            class="text-sm px-4 py-1.5 bg-[#006ffd] hover:bg-[#005edc] text-white rounded-full font-medium transition flex items-center gap-1.5 shadow-sm">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                  d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0L9 13m10.418-2H15m0 0l-4 4"></path>
                        </svg>
                        Refresh
                    </button>
                </div>

                <!-- Loading State -->
                <div id="maintenance-loading" class="flex flex-col items-center justify-center py-16 text-gray-600">
                    <div class="spinner-border animate-spin inline-block w-12 h-12 border-4 border-gray-200 border-t-[#006ffd] rounded-full mb-4"></div>
                    <p class="text-sm font-medium">Loading maintenance requests...</p>
                </div>

                <!-- Iframe -->
                <div style="height: calc(100vh - 300px); min-height: 500px;">
                    <iframe
                        src="{% url 'maintenance_list' %}"
                        title="Maintenance Request List"
                        frameborder="0"
                        class="w-full h-full rounded-b-lg"
                        onload="document.getElementById('maintenance-loading').style.display='none';"
                        style="display: block;">
                    </iframe>
                </div>
            </div>

            <!-- Mobile Tip -->
            <div class="mt-3 text-center text-xs text-gray-500 md:hidden">
                Tip: Rotate to landscape for better view
            </div>
        </div>
    </div>


    </div>
</div>
{% if tasks_status %}
<section class="py-10 px-4 sm:px-6 lg:px-8 bg-white rounded-xl shadow-sm mt-6">
  <div class="max-w-6xl mx-auto">
    <h3 class="text-2xl font-bold text-center text-gray-900 mb-4">Complete Your Profile</h3>
    <p class="text-center text-gray-600 mb-8">By completing all profile details, you have a better chance of getting more Traders to work for you.</p>

    <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-5">

      <!-- Personal Details -->
      <div class="flex items-center justify-between bg-gray-50 hover:bg-gray-100 transition-all rounded-lg p-4 shadow-sm border border-gray-100">
        <div class="flex items-center gap-3">
          {% if tasks_status.personal_details %}
            <span class="text-green-500 text-xl">✓</span>
          {% else %}
            <span class="text-blue-500 text-xl">ℹ️</span>
          {% endif %}
          <span class="text-gray-800 font-medium">Add your personal details</span>
        </div>
        <a href="/renter_account/" class="text-blue-600 hover:text-blue-800 text-sm font-semibold">→</a>
      </div>

      <!-- Agent Details -->
      <div class="flex items-center justify-between bg-gray-50 hover:bg-gray-100 transition-all rounded-lg p-4 shadow-sm border border-gray-100">
        <div class="flex items-center gap-3">
          {% if tasks_status.agent_details %}
            <span class="text-green-500 text-xl">✓</span>
          {% else %}
            <span class="text-blue-500 text-xl">ℹ️</span>
          {% endif %}
          <span class="text-gray-800 font-medium">Add your agent details</span>
        </div>
        <a href="#" class="text-blue-600 hover:text-blue-800 text-sm font-semibold">→</a>
      </div>

      <!-- Condition Report -->
      <div class="flex items-center justify-between bg-gray-50 hover:bg-gray-100 transition-all rounded-lg p-4 shadow-sm border border-gray-100">
        <div class="flex items-center gap-3">
          {% if tasks_status.condition_report %}
            <span class="text-green-500 text-xl">✓</span>
          {% else %}
            <span class="text-blue-500 text-xl">ℹ️</span>
          {% endif %}
          <span class="text-gray-800 font-medium">Complete Condition Report</span>
        </div>
        <a href="/condition-reports/" class="text-blue-600 hover:text-blue-800 text-sm font-semibold">→</a>
      </div>

      <!-- Maintenance Requests -->
      <div class="flex items-center justify-between bg-gray-50 hover:bg-gray-100 transition-all rounded-lg p-4 shadow-sm border border-gray-100">
        <div class="flex items-center gap-3">
          {% if tasks_status.maintenance_requests %}
            <span class="text-green-500 text-xl">✓</span>
          {% else %}
            <span class="text-blue-500 text-xl">ℹ️</span>
          {% endif %}
          <span class="text-gray-800 font-medium">Add Maintenance Requests</span>
        </div>
        <a href="/jobs/" class="text-blue-600 hover:text-blue-800 text-sm font-semibold">→</a>
      </div>

      <!-- Appliance Reports -->
      <div class="flex items-center justify-between bg-gray-50 hover:bg-gray-100 transition-all rounded-lg p-4 shadow-sm border border-gray-100">
        <div class="flex items-center gap-3">
          {% if tasks_status.appliance_reports %}
            <span class="text-green-500 text-xl">✓</span>
          {% else %}
            <span class="text-blue-500 text-xl">ℹ️</span>
          {% endif %}
          <span class="text-gray-800 font-medium">Add Appliance Reports</span>
        </div>
        <a href="/appliance-reports/" class="text-blue-600 hover:text-blue-800 text-sm font-semibold">→</a>
      </div>

      <!-- Minimum Standard Reports -->
      <div class="flex items-center justify-between bg-gray-50 hover:bg-gray-100 transition-all rounded-lg p-4 shadow-sm border border-gray-100">
        <div class="flex items-center gap-3">
          {% if tasks_status.minimum_standard_reports %}
            <span class="text-green-500 text-xl">✓</span>
          {% else %}
            <span class="text-blue-500 text-xl">ℹ️</span>
          {% endif %}
          <span class="text-gray-800 font-medium">Add Minimum Standard Reports</span>
        </div>
        <a href="/standard-reports/" class="text-blue-600 hover:text-blue-800 text-sm font-semibold">→</a>
      </div>

    </div>
  </div>
</section>
{% endif %}

    <div class="container mt-4">
      <h3 class="mb-3">Manage Calendar</h3>

      <div class="card shadow-sm rounded-3">
        <div class="card-body p-0">
          <iframe
            src="{% url 'calendar' %}"
            style="width: 100%; height: 80vh; border: none;"
            title="Request Reports">
          </iframe>
        </div>
      </div>
    </div>


  <!-- Features Section -->
  <!--<section class="py-16 px-4 sm:px-6 lg:px-8 bg-white">-->
  <!--  <div class="max-w-7xl mx-auto">-->
  <!--    <h3 class="text-3xl font-bold text-center text-gray-900 mb-12">Why Choose FixMyHouse?</h3>-->
  <!--    <div class="grid md:grid-cols-3 gap-8">-->
  <!--      <div class="bg-gray-50 p-6 rounded-xl shadow-md hover:shadow-lg transition duration-300 text-center">-->
  <!--        <i class="bi bi-house-door-fill text-[#293272] text-4xl mb-4"></i>-->
  <!--        <h4 class="text-xl font-semibold text-gray-800 mb-3">Streamlined Property Management</h4>-->
  <!--        <p class="text-gray-600 mb-4">Easily manage your rental properties, track tenancy agreements, and ensure compliance with Australian tenancy laws.</p>-->
  <!--      </div>-->
  <!--      <div class="bg-gray-50 p-6 rounded-xl shadow-md hover:shadow-lg transition duration-300 text-center">-->
  <!--        <i class="bi bi-tools text-[#EF7153] text-4xl mb-4"></i>-->
  <!--        <h4 class="text-xl font-semibold text-gray-800 mb-3">Fast Maintenance Requests</h4>-->
  <!--        <p class="text-gray-600 mb-4">Report issues quickly and connect with trusted traders for prompt repairs, keeping your property in top condition.</p>-->
  <!--      </div>-->
  <!--      <div class="bg-gray-50 p-6 rounded-xl shadow-md hover:shadow-lg transition duration-300 text-center">-->
  <!--        <i class="bi bi-person-check-fill text-[#293272] text-4xl mb-4"></i>-->
  <!--        <h4 class="text-xl font-semibold text-gray-800 mb-3">Trusted Agent Connections</h4>-->
  <!--        <p class="text-gray-600 mb-4">Work with licensed property agents to handle leasing, inspections, and compliance with ease.</p>-->
  <!--      </div>-->
  <!--    </div>-->
  <!--  </div>-->
  <!--</section>-->

  <!-- How It Works Section -->
  <!--<section class="py-16 px-4 sm:px-6 lg:px-8 bg-gradient-to-b from-blue-50 to-white">-->
  <!--  <div class="max-w-7xl mx-auto">-->
  <!--    <h3 class="text-4xl font-extrabold text-center text-gray-900 mb-16 tracking-tight">How FixMyHouse Works</h3>-->
  <!--    <div class="space-y-16">-->
        <!-- Renter -->
  <!--      <div class="flex flex-col md:flex-row items-center gap-8 bg-white rounded-2xl shadow-lg p-6 hover:shadow-xl transition duration-300">-->
  <!--        <div class="md:w-1/2">-->
  <!--          <img src="https://images.unsplash.com/photo-1600585154340-be6161a56a0c?auto=format&fit=crop&w=800&q=80" alt="Renter" class="w-full h-72 object-cover rounded-xl shadow-md hover:scale-105 transition-transform duration-300">-->
  <!--        </div>-->
  <!--        <div class="md:w-1/2">-->
  <!--          <h4 class="text-2xl font-semibold text-gray-800 mb-4">Renters: Your Home, Your Control</h4>-->
  <!--          <p class="text-gray-600 mb-6 leading-relaxed">-->
  <!--            As a renter, FixMyHouse empowers you to report maintenance issues quickly, track repairs, and communicate with your property agent.-->
  <!--          </p>-->
  <!--          <a href="/properties/" class="inline-block btn-primary py-2.5 px-6 rounded-full shadow-md transition duration-300 font-medium">-->
  <!--            Start Managing Your Rental-->
  <!--          </a>-->
  <!--        </div>-->
  <!--      </div>-->
        <!-- Trader -->
  <!--      <div class="flex flex-col md:flex-row-reverse items-center gap-8 bg-white rounded-2xl shadow-lg p-6 hover:shadow-xl transition duration-300">-->
  <!--        <div class="md:w-1/2">-->
  <!--          <img src="https://images.unsplash.com/photo-1581091215367-59ab6b52d2a9?auto=format&fit=crop&w=800&q=80" alt="Trader" class="w-full h-72 object-cover rounded-xl shadow-md hover:scale-105 transition-transform duration-300">-->
  <!--        </div>-->
  <!--        <div class="md:w-1/2">-->
  <!--          <h4 class="text-2xl font-semibold text-gray-800 mb-4">Traders: Reliable Repairs, Fast</h4>-->
  <!--          <p class="text-gray-600 mb-6 leading-relaxed">-->
  <!--            Traders on FixMyHouse are licensed professionals who handle maintenance requests efficiently.-->
  <!--          </p>-->
  <!--          <a href="/jobs/" class="inline-block btn-accent py-2.5 px-6 rounded-full shadow-md transition duration-300 font-medium">-->
  <!--            View Maintenance Jobs-->
  <!--          </a>-->
  <!--        </div>-->
  <!--      </div>-->
        <!-- Agent -->
  <!--      <div class="flex flex-col md:flex-row items-center gap-8 bg-white rounded-2xl shadow-lg p-6 hover:shadow-xl transition duration-300">-->
  <!--        <div class="md:w-1/2">-->
  <!--          <img src="https://images.unsplash.com/photo-1596079890680-7b1d9ffb2a6d?auto=format&fit=crop&w=800&q=80" alt="Agent" class="w-full h-72 object-cover rounded-xl shadow-md hover:scale-105 transition-transform duration-300">-->
  <!--        </div>-->
  <!--        <div class="md:w-1/2">-->
  <!--          <h4 class="text-2xl font-semibold text-gray-800 mb-4">Agents: Seamless Property Management</h4>-->
  <!--          <p class="text-gray-600 mb-6 leading-relaxed">-->
  <!--            Property agents act as the bridge between renters and property owners, handling lease agreements, routine inspections, and maintenance coordination.-->
  <!--          </p>-->
  <!--          <a href="/agents/" class="inline-block btn-primary py-2.5 px-6 rounded-full shadow-md transition duration-300 font-medium">-->
  <!--            Manage Your Properties-->
  <!--          </a>-->
  <!--        </div>-->
  <!--      </div>-->
  <!--    </div>-->
  <!--  </div>-->
  <!--</section>-->

  <!-- Testimonials -->
  <section class="py-16 px-4 sm:px-6 lg:px-8 bg-blue-50">
    <div class="max-w-7xl mx-auto">
      <h3 class="text-3xl font-bold text-center text-gray-900 mb-12">What Our Users Say</h3>
      <div class="grid md:grid-cols-3 gap-8">
        <div class="bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition text-center">
          <p class="text-gray-600 italic mb-4">"FixMyHome made reporting maintenance issues so simple. I got a response from my agent within hours!"</p>
          <h4 class="font-semibold text-[#293272]">- Jane D., Renter, Sydney</h4>
        </div>
        <div class="bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition text-center">
          <p class="text-gray-600 italic mb-4">"As a trader, I love how FixMyHome organizes job requests. It’s easy to track and complete tasks."</p>
          <h4 class="font-semibold text-[#EF7153]">- Mark S., Plumber, Melbourne</h4>
        </div>
        <div class="bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition text-center">
          <p class="text-gray-600 italic mb-4">"Managing multiple properties is a breeze with FixMyHome. The platform keeps everything in one place."</p>
          <h4 class="font-semibold text-[#293272]">- Sarah W., Property Agent, Brisbane</h4>
        </div>
      </div>
    </div>
  </section>

  <!-- Contact Us -->
  <section class="py-16 px-4 sm:px-6 lg:px-8 bg-white">
    <div class="max-w-7xl mx-auto text-center">
      <h3 class="text-3xl font-bold text-gray-900 mb-6">Need Help?</h3>
      <p class="text-gray-600 mb-8 max-w-2xl mx-auto">Our support team is here to assist with any questions.</p>
      <a href="/contact/" class="inline-block btn-accent py-3 px-8 rounded-full shadow-lg transition duration-300 text-lg font-semibold">Contact Us</a>
    </div>
  </section>

  <!-- Footer -->
  <footer class="bg-gray-800 text-white py-8">
    {% include 'renter/home/footer.html' %}
  </footer>
</body>
</html>
