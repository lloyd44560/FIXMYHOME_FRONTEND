<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register as</title>

    <!-- Tailwind CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class=" min-h-screen flex items-center justify-center p-4">
  <div class="w-full max-w-xl bg-white p-6 rounded-lg">

    <button
      type="button"
      id="backBtn"
      class="p-2 rounded-md text-blue-600 hover:text-blue-800 hover:bg-blue-100 disabled:opacity-50 disabled:pointer-events-none"
      disabled
      aria-label="Back"
    >
      <!-- Left arrow icon -->
      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none"
           viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M15 19l-7-7 7-7" />
      </svg>
    </button>

    <h2 class="text-center text-2xl font-bold mb-6">Register as Trader</h2>

    <!-- Stepper -->
    <div class="flex justify-between mb-6">
      <div class="flex-1 flex flex-col items-center">
        <div id="step1-indicator" class="inline-flex items-center justify-center w-10 h-10 rounded-full bg-blue-600 text-white font-semibold">1</div>
        <span class="mt-2 text-sm font-medium text-gray-600">Details</span>
      </div>
      <div class="flex-1 flex flex-col items-center">
        <div id="step2-indicator" class="inline-flex items-center justify-center w-10 h-10 rounded-full bg-gray-300 text-gray-600">2</div>
        <span class="mt-2 text-sm font-medium text-gray-600">Company</span>
      </div>
      <div class="flex-1 flex flex-col items-center">
        <div id="step3-indicator" class="inline-flex items-center justify-center w-10 h-10 rounded-full bg-gray-300 text-gray-600">3</div>
        <span class="mt-2 text-sm font-medium text-gray-600">Team</span>
      </div>
      <div class="flex-1 flex flex-col items-center">
        <div id="step4-indicator" class="inline-flex items-center justify-center w-10 h-10 rounded-full bg-gray-300 text-gray-600">4</div>
        <span class="mt-2 text-sm font-medium text-gray-600">Rates</span>
      </div>
    </div>

    <form id="registrationForm" class="space-y-4" style="height: 480px; overflow-y: auto;" method="POST" action="{% url 'register_renter' %}" enctype="multipart/form-data">

    {% csrf_token %}
    <!-- Step 1 -->
    <div id="step1" class="space-y-4">
      <div class="mb-4">
        <label for="name" class="block text-gray-700 font-medium mb-2">Name*</label>
        <input
          type="text"
          name="name"
          id="name"
          placeholder="Name"
          class="w-full border border-gray-300 rounded-md p-2"
        />
      </div>

      <div class="mb-4">
        <label for="email" class="block text-gray-700 font-medium mb-2">Email*</label>
        <input type="email" name="email" id="email" placeholder="Email" class="w-full border border-gray-300 rounded-md p-2">

      </div>

      <div class="mb-4">
        <label for="phone" class="block text-gray-700 font-medium mb-2">Phone Number*</label>
        <input
          type="tel"
          name="phone"
          id="phone"
          placeholder="Phone Number"

          class="w-full border border-gray-300 rounded-md p-2"
        />
      </div>

      <div class="mb-4 relative">
        <label for="password" class="block text-gray-700 font-medium mb-2">Password*</label>
        <input
          id="password"
          name="password"
          type="password"
          placeholder="Password"

          class="w-full border border-gray-300 rounded-md p-2 pr-10"
        />
        <button
          type="button"
          id="togglePassword"
          class="absolute right-2 top-9 text-sm text-gray-600"
        >
          Show
        </button>
      </div>

      <div class="mb-4 relative">
        <label for="confirmPassword" class="block text-gray-700 font-medium mb-2">Confirm Password*</label>
        <input
          id="confirmPassword"
          name="confirmPassword"
          type="password"
          placeholder="Confirm Password"

          class="w-full border border-gray-300 rounded-md p-2 pr-10"
        />
        <button
          type="button"
          id="toggleConfirmPassword"
          class="absolute right-2 top-9 text-sm text-gray-600"
        >
          Show
        </button>
      </div>
    </div>

    <!-- Step 2 -->
    <div id="step2" class="space-y-4 hidden">
        <!-- Type of Company -->
        <div>
            <label class="block text-sm font-medium text-gray-700">Type of Company <span class="text-red-500">*</span></label>
            <select class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 focus:ring-blue-500 focus:border-blue-500">
            <option>Select Type</option>
            </select>
        </div>

        <!-- Company Name -->
        <div>
            <label class="block text-sm font-medium text-gray-700">Company Name</label>
            <input type="text" class="mt-1 block w-full border border-gray-300 rounded-md p-2 focus:ring-blue-500 focus:border-blue-500" />
        </div>

        <!-- Company Address -->
        <div>
            <label class="block text-sm font-medium text-gray-700">Company Address</label>
            <input type="text" class="mt-1 block w-full border border-gray-300 rounded-md p-2 focus:ring-blue-500 focus:border-blue-500" />
        </div>

        <!-- Company Email -->
        <div>
            <label class="block text-sm font-medium text-gray-700">Company Email (if available)</label>
            <input type="email" class="mt-1 block w-full border border-gray-300 rounded-md p-2 focus:ring-blue-500 focus:border-blue-500" />
        </div>

        <!-- Company Landline -->
        <div>
            <label class="block text-sm font-medium text-gray-700">Company landline number (if available)</label>
            <input type="tel" class="mt-1 block w-full border border-gray-300 rounded-md p-2 focus:ring-blue-500 focus:border-blue-500" />
        </div>

        <!-- Contractor License Number -->
        <div>
            <label class="block text-sm font-medium text-gray-700">Contractor license number</label>
            <input type="text" class="mt-1 block w-full border border-gray-300 rounded-md p-2 focus:ring-blue-500 focus:border-blue-500" />
        </div>

        <!-- Add Another License -->
        <div>
            <button type="button" class="w-full text-blue-600 border border-blue-500 rounded-md py-2 hover:bg-blue-50 font-medium text-sm">
            + ADD ANOTHER LICENSE
            </button>
        </div>

        <!-- GST Toggle -->
        <div class="flex items-center space-x-2">
            <label class="block text-sm font-medium text-gray-700">Is your company currently registered for GST?</label>
            <input type="checkbox" class="toggle-checkbox w-5 h-5 text-blue-600 rounded border-gray-300 focus:ring-blue-500" />
        </div>

        <!-- ABN -->
        <div>
            <label class="block text-sm font-medium text-gray-700">Australian Business Number (ABN)</label>
            <input type="text" class="mt-1 block w-full border border-gray-300 rounded-md p-2 focus:ring-blue-500 focus:border-blue-500" />
        </div>

        <!-- Industry Expertise -->
        <div>
            <label class="block text-sm font-medium text-gray-700">Industry expertise</label>
            <select class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 focus:ring-blue-500 focus:border-blue-500">
            <option>Select Industry</option>
            </select>
        </div>

        <!-- Other Expertise -->
        <div>
            <label class="block text-sm font-medium text-gray-700">Other areas of expertise (optional)</label>
            <select class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 focus:ring-blue-500 focus:border-blue-500">
            <option>Select Expertise</option>
            </select>
        </div>
    </div>

    <!-- Step 3 -->
    <div id="step3" class="space-y-4 hidden">
        <!-- Add Team Member Button -->
        <div>
            <button type="button" class="w-full text-blue-600 border border-blue-500 rounded-md py-2 hover:bg-blue-50 font-medium text-sm">
            + ADD TEAM MEMBER
            </button>
        </div>

        <!-- Team Member Name -->
        <div>
            <label class="block text-sm font-medium text-gray-700">Team member name <span class="text-red-500">*</span></label>
            <input type="text" class="mt-1 block w-full border border-gray-300 rounded-md p-2 focus:ring-blue-500 focus:border-blue-500" />
        </div>

        <!-- Position -->
        <div>
            <label class="block text-sm font-medium text-gray-700">Position <span class="text-red-500">*</span></label>
            <input type="text" class="mt-1 block w-full border border-gray-300 rounded-md p-2 focus:ring-blue-500 focus:border-blue-500" />
        </div>

        <div class="space-y-4">
            <!-- Labour (per hour) -->
            <div class="grid grid-cols-2 gap-x-4">
                <!-- Left column: Label, description, counter -->
                <div>
                    <label class="block text-sm font-medium text-gray-700">Labour (per hour)</label>
                    <p class="text-xs text-gray-500">Your team member’s rate per hour</p>
                    <div class="mt-2 grid grid-cols-2 gap-2">
                        <div class="flex items-center border border-gray-300 rounded-md px-2 py-1 w-fit text-sm space-x-2">
                            <button type="button" class="text-blue-600 px-2">−</button>
                            <span class="px-1">1</span>
                            <button type="button" class="text-blue-600 px-2">+</button>
                        </div>
                        <div class="flex items-center border border-gray-300 rounded-md px-2 py-1 w-fit text-sm space-x-2">
                            <button type="button" class="text-blue-600 px-2">−</button>
                            <span class="px-1">1</span>
                            <button type="button" class="text-blue-600 px-2">+</button>
                        </div>
                    </div>
                </div>

                <!-- Right column: Dollar sign + larger input -->
                <div class="flex items-center justify-end">
                    <div class="flex items-center border border-gray-300 rounded-md px-2 py-1 bg-white w-32 h-10">
                        <span class="text-gray-600 mr-1">$</span>
                        <input
                        type="number"
                        step="0.01"
                        placeholder="XX.XX"
                        class="w-full outline-none border-none text-base focus:ring-0"
                        />
                    </div>
                </div>
            </div>

            <!-- Callout rate -->
            <div class="grid grid-cols-2 gap-x-4">
                <!-- Left column: Label, description, counter -->
                <div>
                    <label class="block text-sm font-medium text-gray-700">Callout rate</label>
                    <p class="text-xs text-gray-500">Team member’s travel and logistics expenses</p>
                    <div class="mt-2 grid grid-cols-2 gap-2">
                        <div class="flex items-center border border-gray-300 rounded-md px-2 py-1 w-fit text-sm space-x-2">
                            <button type="button" class="text-blue-600 px-2">−</button>
                            <span class="px-1">1</span>
                            <button type="button" class="text-blue-600 px-2">+</button>
                        </div>
                        <div class="flex items-center border border-gray-300 rounded-md px-2 py-1 w-fit text-sm space-x-2">
                            <button type="button" class="text-blue-600 px-2">−</button>
                            <span class="px-1">1</span>
                            <button type="button" class="text-blue-600 px-2">+</button>
                        </div>
                    </div>
                </div>

                <!-- Right column: Dollar sign + larger input -->
                <div class="flex items-center justify-end">
                    <div class="flex items-center border border-gray-300 rounded-md px-2 py-1 bg-white w-32 h-10">
                        <span class="text-gray-600 mr-1">$</span>
                        <input
                        type="number"
                        step="0.01"
                        placeholder="XX.XX"
                        class="w-full outline-none border-none text-base focus:ring-0"
                        />
                    </div>
                </div>
            </div>
        </div>

        <!-- Employee Contact Number -->
        <div>
            <label class="block text-sm font-medium text-gray-700">Employee contact number (if available) <span class="text-red-500">*</span></label>
            <input type="tel" class="mt-1 block w-full border border-gray-300 rounded-md p-2 focus:ring-blue-500 focus:border-blue-500" />
        </div>

        <!-- Employee Email -->
        <div>
            <label class="block text-sm font-medium text-gray-700">Employee email (if available)</label>
            <input type="email" placeholder="name@email.com" class="mt-1 block w-full border border-gray-300 rounded-md p-2 focus:ring-blue-500 focus:border-blue-500" />
        </div>

        <!-- Active Postal Codes -->
        <div>
            <label class="block text-sm font-medium text-gray-700">Active postal codes</label>
            <input type="text" placeholder="3070, 3071, 3072" class="mt-1 block w-full border border-gray-300 rounded-md p-2 focus:ring-blue-500 focus:border-blue-500" />
        </div>
    </div>

    <!-- Step 3 -->
    <div id="step4" class="space-y-4 hidden">
        <!-- GST Registered Toggle -->
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Is your company currently registered for GST?</label>
            <p class="text-xs text-gray-500 mb-2">
            The General Service Tax or GST is a 10% fee on top of your original charge.
            </p>
            <label class="inline-flex items-center cursor-pointer">
            <input type="checkbox" class="sr-only peer">
            <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:bg-blue-600 transition-all duration-300"></div>
            </label>
        </div>

        <!-- Area of Service Heading -->
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Area of Service</label>
            <p class="text-xs text-gray-500">
            Your input in the fields will also determine your Area of Service. We will recommend you in the area.
            </p>
        </div>

        <!-- State -->
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">State <span class="text-red-500">*</span></label>
            <select class="w-full border border-gray-300 rounded-md p-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
            <option value="">Select state</option>
            </select>
        </div>

        <!-- Municipality -->
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Municipality <span class="text-red-500">*</span></label>
            <select class="w-full border border-gray-300 rounded-md p-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
            <option value="">Select municipality</option>
            </select>
        </div>

        <!-- City -->
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">City <span class="text-red-500">*</span></label>
            <select class="w-full border border-gray-300 rounded-md p-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
            <option value="">Select city</option>
            </select>
        </div>

        <!-- Address Line 1 -->
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Address Line 1 <span class="text-red-500">*</span></label>
            <input type="text" class="w-full border border-gray-300 rounded-md p-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
        </div>

        <!-- Address Line 2 -->
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Address Line 2</label>
            <input type="text" class="w-full border border-gray-300 rounded-md p-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
        </div>

        <!-- Postal Code -->
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Postal Code <span class="text-red-500">*</span></label>
            <input type="text" class="w-full border border-gray-300 rounded-md p-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
        </div>
    </div>


    <!-- Navigation Buttons -->
    <div class="flex justify-between">
        <!-- Continue is type=button so no submit yet -->
        <button type="button" id="nextBtn" class="w-full px-4 py-2 bg-blue-600 text-white rounded">Continue</button>
        <!-- Submit button, initially hidden -->
        <button type="submit" id="submitBtn" class="w-full px-4 py-2 bg-green-600 text-white rounded hidden">Submit</button>
    </div>

    <!-- Login Link -->
        <p class="text-center text-sm mt-4">
        Already have an account?
        <a href="/login" class="text-blue-600 font-semibold hover:underline">Login Here</a>
    </p>
    </form>
  </div>

  <script>
    const steps = [
        document.getElementById('step1'), 
        document.getElementById('step2'), 
        document.getElementById('step3'), 
        document.getElementById('step4')
    ];
    const stepIndicators = [
        document.getElementById('step1-indicator'),
        document.getElementById('step2-indicator'),
        document.getElementById('step3-indicator'),
        document.getElementById('step4-indicator'),
    ];

    const backBtn = document.getElementById('backBtn');
    const nextBtn = document.getElementById('nextBtn');
    const submitBtn = document.getElementById('submitBtn'); // New Submit button
    const uploadOption = document.getElementById('uploadOption');
    const manualUploadFields = document.getElementById('manualUploadFields');

    let currentStep = 0;

    function updateStep() {
        steps.forEach((step, index) => {
        step.classList.toggle('hidden', index !== currentStep);
        stepIndicators[index].classList.toggle('bg-blue-600', index === currentStep);
        stepIndicators[index].classList.toggle('text-white', index === currentStep);
        stepIndicators[index].classList.toggle('bg-gray-300', index !== currentStep);
        stepIndicators[index].classList.toggle('text-gray-600', index !== currentStep);
    });

    backBtn.disabled = currentStep === 0;

    if (currentStep === steps.length - 1) {
      // Last step: hide Next, show Submit
      nextBtn.classList.add('hidden');
      submitBtn.classList.remove('hidden');
    } else {
      // Other steps: show Next, hide Submit
      nextBtn.classList.remove('hidden');
      submitBtn.classList.add('hidden');
    }

    // Show manual upload fields only if on step 3 and option selected
    if (currentStep === 2) {
      if (uploadOption.value === 'manual') {
        manualUploadFields.classList.remove('hidden');
      } else {
        manualUploadFields.classList.add('hidden');
      }
    } else {
      manualUploadFields.classList.add('hidden');
    }
  }

  backBtn.addEventListener('click', () => {
    if (currentStep > 0) {
      currentStep--;
      updateStep();
    }
  });

  nextBtn.addEventListener('click', () => {
    if (currentStep < steps.length - 1) {
      currentStep++;
      updateStep();
    }
  });

  const form = document.getElementById('registrationForm');

  form.addEventListener('submit', (e) => {
    e.preventDefault();

    if (form.checkValidity()) {
      alert('Form submitted! ');
      form.reset();
      currentStep = 0;
      updateStep();
    } else {
      form.reportValidity();
    }
  });

  uploadOption.addEventListener('change', () => {
    if (uploadOption.value === 'manual' && currentStep === 2) {
      manualUploadFields.classList.remove('hidden');
    } else {
      manualUploadFields.classList.add('hidden');
    }
  });

    // Password toggle
    const togglePassword = document.getElementById('togglePassword');
    const passwordInput = document.getElementById('password');
    togglePassword.addEventListener('click', () => {
      if (passwordInput.type === 'password') {
        passwordInput.type = 'text';
        togglePassword.textContent = 'Hide';
      } else {
        passwordInput.type = 'password';
        togglePassword.textContent = 'Show';
      }
    });

    const toggleConfirmPassword = document.getElementById('toggleConfirmPassword');
    const confirmPasswordInput = document.getElementById('confirmPassword');
    toggleConfirmPassword.addEventListener('click', () => {
      if (confirmPasswordInput.type === 'password') {
        confirmPasswordInput.type = 'text';
        toggleConfirmPassword.textContent = 'Hide';
      } else {
        confirmPasswordInput.type = 'password';
        toggleConfirmPassword.textContent = 'Show';
      }
    });

    // Initialize
    updateStep();

    const roomInput = document.getElementById('roomType');
  const addRoomBtn = document.getElementById('addRoomBtn');
  const roomList = document.getElementById('roomList');

  function createRoomItem(roomName) {
    const li = document.createElement('li');
    li.className = "flex items-center justify-between border p-3 rounded-md";

    const span = document.createElement('span');
    span.className = "text-gray-800 font-medium";
    span.textContent = roomName;

    const controls = document.createElement('div');
    controls.className = "flex gap-3";

    const editBtn = document.createElement('button');
    editBtn.innerHTML = `
      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-blue-500 hover:text-blue-700" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M11 5H6a2 2 0 00-2 2v11.5A1.5 1.5 0 005.5 20H17a2 2 0 002-2v-5m-5.586-4.586a2 2 0 112.828 2.828L11 17H8v-3l5.414-5.414z"/>
      </svg>
    `;
    editBtn.onclick = () => {
      roomInput.value = span.textContent;
      li.remove();
    };

    const deleteBtn = document.createElement('button');
    deleteBtn.innerHTML = `
      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-red-500 hover:text-red-700" fill="none"
           viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M6 18L18 6M6 6l12 12"/>
      </svg>
    `;
    deleteBtn.onclick = () => li.remove();

    controls.appendChild(editBtn);
    controls.appendChild(deleteBtn);

    li.appendChild(span);
    li.appendChild(controls);

    return li;
  }

  addRoomBtn.addEventListener('click', () => {
    const roomName = roomInput.value.trim();
    if (roomName) {
      roomList.appendChild(createRoomItem(roomName));
      roomInput.value = '';
    }
  });
  </script>

</body>
</html>