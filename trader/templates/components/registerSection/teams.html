{% load widget_tweaks %}
{{ formset.management_form }}
{% for form in formset %}
<div id="step3" class="space-y-4 hidden">
    <!-- Team Member Name -->
    <div>
        <label id="nameLabel" for="teamMemberName" class="block text-sm font-medium text-gray-700">Team member name <span class="text-red-500">*</span></label>
        {{ form.teamName|add_class:"mt-1 block w-full border border-gray-300 rounded-md p-2 focus:ring-blue-500 focus:border-blue-500" }}
        <span id="teamMemberNameError" class="text-red-500 text-xs"></span>
    </div>

    <!-- Position -->
    <div>
        <label for="teamMemberPosition" class="block text-sm font-medium text-gray-700">Position <span class="text-red-500">*</span></label>
        {{ form.position|add_class:"mt-1 block w-full border border-gray-300 rounded-md p-2 focus:ring-blue-500 focus:border-blue-500" }}
        <span id="teamMemberPositionError" class="text-red-500 text-xs"></span>
    </div>

    <!-- Add Team Member Button -->
    <div>
        <button id="addTeamMember" type="button" class="w-full text-blue-600 border border-blue-500 rounded-md py-2 hover:bg-blue-50 font-medium text-sm">
            + ADD TEAM MEMBER
        </button>

        <!-- Team Member List -->
        <ul id="teamMemberList" class="mt-4 space-y-3">
            <h1 id="addedMembersHeader" class="font-bold hidden">Added Members</h1>
            <!-- Dynamic items will be added here -->
        </ul>
    </div>

    <div class="space-y-4">
        <!-- Labour (per hour) -->
        <div class="grid grid-cols-2 gap-x-4">
            <!-- Left column: Label, description, counter -->
            <div>
                <label class="block text-sm font-medium text-gray-700">Labour (per hour)</label>
                <p class="text-xs text-gray-500">Your team member’s rate per hour</p>
            </div>

            <!-- Right column: Dollar sign + larger input -->
            <div class="flex items-center justify-end">
                <div class="flex items-center border border-gray-300 rounded-md px-2 py-1 bg-white w-32 h-10">
                    <span class="text-gray-600 mr-1">$</span>
                    {{ form.labour_rate_per_hour|add_class:"w-full outline-none border-none text-base focus:ring-0" }}
                </div>
            </div>
        </div>

        <!-- Callout rate -->
        <div class="grid grid-cols-2 gap-x-4">
            <!-- Left column: Label, description, counter -->
            <div>
                <label class="block text-sm font-medium text-gray-700">Callout rate</label>
                <p class="text-xs text-gray-500">Team member’s travel and logistics expenses</p>
            </div>

            <!-- Right column: Dollar sign + larger input -->
            <div class="flex items-center justify-end">
                <div class="flex items-center border border-gray-300 rounded-md px-2 py-1 bg-white w-32 h-10">
                    <span class="text-gray-600 mr-1">$</span>
                    {{ form.callout_rate|add_class:"w-full outline-none border-none text-base focus:ring-0" }}
                </div>
            </div>
        </div>
    </div>

    <!-- Employee Contact Number -->
    <div>
        <label id="contactLabel" class="block text-sm font-medium text-gray-700">Employee contact number (if available)</label>
        {{ form.contact_number|add_class:"mt-1 block w-full border border-gray-300 rounded-md p-2 focus:ring-blue-500 focus:border-blue-500" }}
        <span id="empContactNumber" class="text-red-500 text-xs"></span>
    </div>

    <!-- Employee Email -->
    <div>
        <label id="emailLabel" class="block text-sm font-medium text-gray-700">Employee email (if available)</label>
        {{ form.email|add_class:"mt-1 block w-full border border-gray-300 rounded-md p-2 focus:ring-blue-500 focus:border-blue-500" }}
        <span id="empEmail" class="text-red-500 text-xs"></span>
    </div>

    <!-- Active Postal Codes -->
    <div>
        <label id="postal_nums" class="block text-sm font-medium text-gray-700">Active postal codes</label>
        {{ form.active_postal_codes|add_class:"mt-1 block w-full border border-gray-300 rounded-md p-2 focus:ring-blue-500 focus:border-blue-500" }}
        <span id="empPostal" class="text-red-500 text-xs"></span>
    </div>

    <!-- Holidays* (Not available to work) -->
    <!-- <div class="flex justify-center">
        <div class="bg-white p-4 rounded-lg shadow-lg w-full max-w-md flex flex-col items-center">
            <h2 class="text-sm font-semibold text-gray-700 mb-2 text-center">Holidays* <span class="text-xs text-gray-500">(Not available to work)</span></h2>
            <div class="flex items-center justify-between mb-4 w-full max-w-xs mx-auto">
                <button type="button" id="prev" class="text-blue-500 hover:text-blue-700">&lt;</button>
                    <div class="text-lg font-semibold text-gray-800">June 2024</div>
                <button id="next" class="text-blue-500 hover:text-blue-700">&gt;</button>
            </div>
            <div class="grid grid-cols-7 text-center text-sm font-medium text-gray-500 w-full">
                <div>Sun</div><div>Mon</div><div>Tue</div><div>Wed</div><div>Thu</div><div>Fri</div><div>Sat</div>
            </div>
            <div id="calendar" class="grid grid-cols-7 text-center text-gray-800 mt-2 gap-y-2 w-full">
                Calendar cells generated by JS
            </div>
        </div>
    </div> -->
    <!-- Holiday -->
    <div>
        <label for="holiday_date" class="block text-sm font-medium text-gray-700">Holiday <span class="text-red-500">*</span></label>
        {{ form.holiday_date|add_class:"mt-1 block w-full border border-gray-300 rounded-md p-2 focus:ring-blue-500 focus:border-blue-500" }}
        <span id="holidaysError" class="text-red-500 text-xs"></span>
    </div>
    <!-- Add Hoiday Button -->
    <div>
        <button id="addHoliday" type="button" class="w-full text-blue-600 border border-blue-500 rounded-md py-2 hover:bg-blue-50 font-medium text-sm">
            + ADD HOLIDAY
        </button>

        <!-- Holiday List -->
        <ul id="holidayList" class="mt-4 space-y-3">
            <h1 id="addedHolidayHeader" class="font-bold hidden">Added Holiday</h1>
            <!-- Dynamic items will be added here -->
        </ul>
    </div>
    <!-- Time-in and Time-out -->
    <div class="flex justify-center">
        <div class="space-y-6 bg-white p-6 rounded shadow-md w-full max-w-md flex flex-col items-center">
            <!-- Time Block 1 -->
            <div class="w-full">
                <label id="timeIn" class="block font-semibold text-gray-800 mb-2 text-center">Employee time-in</label>
                <div class="flex items-center gap-3 justify-center">
                    {{ form.time_in|add_class:"border border-gray-300 px-2 py-1 rounded text-center w-full" }}
                </div>
                <span id="empTimeIn" class="text-red-500 text-xs"></span>
            </div>
            <!-- Time Block 2 -->
            <div class="w-full">
                <label id="timeOut" class="block font-semibold text-gray-800 mb-2 text-center">Employee time-out</label>
                <div class="flex items-center gap-3 justify-center">
                    {{ form.time_out|add_class:"border border-gray-300 px-2 py-1 rounded text-center w-full" }}
                </div>
                <span id="empTimeOut" class="text-red-500 text-xs"></span>
            </div>
            <!-- Do you work in Holidays? -->
            <div id="wrkInholiday" class="flex items-center space-x-2 hidden">
                <label for="{{ form.IsWorkInHoliday.id_for_label }}" class="block text-sm font-medium text-gray-700">Do you work in Holidays?</label>
                {{ form.IsWorkInHoliday|add_class:"toggle-checkbox w-5 h-5 text-blue-600 rounded border-gray-300 focus:ring-blue-500" }}
            </div>
            <!-- Holiday Time Block 1 -->
            <div id="holidayTimeIn_div" class="w-full holiday-time-block hidden">
                <label id="timeIn" class="block font-semibold text-gray-800 mb-2 text-center">Holiday time-in</label>
                <div class="flex items-center gap-3 justify-center">
                    {{ form.holidayTime_in|add_class:"border border-gray-300 px-2 py-1 rounded text-center w-full" }}
                </div>
                <span id="holidayTimeIn" class="text-red-500 text-xs"></span>
            </div>
            <!-- Holiday Time Block 2 -->
            <div id="holidayTimeOut_div" class="w-full holiday-time-block hidden">
                <label id="timeOut" class="block font-semibold text-gray-800 mb-2 text-center">Holiday time-out*</label>
                <div class="flex items-center gap-3 justify-center">
                    {{ form.holidayTime_out|add_class:"border border-gray-300 px-2 py-1 rounded text-center w-full" }}
                </div>
                <span id="holidayTimeOut" class="text-red-500 text-xs"></span>
            </div>
        </div>
    </div>
</div>

{% endfor %}